<!doctype html> <meta charset="utf-8">
<button id="action1" class="requires_login">action1 (requires login)</button>
<button id="action2" class="requires_login">action2 (requires login)</button>
<button onclick="username=null">logout</button>
<script>
var username=null
document.all.action1.onclick = event => {alert(username+' does action1')}
document.all.action2.onclick = event => {alert(username+' does action2')}
function post_login_handler(previous_handler){
	return function(event){
		if(username==null) username=prompt('login','username')
		if(username!=null) previous_handler(event)
	}
}
for(element of document.querySelectorAll('.requires_login')) element.onclick = post_login_handler(element.onclick)
</script>
