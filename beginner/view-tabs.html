<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>view tabs</title>
</head>

<body>
    <h1>view tabs</h1>
    <style>
        .view-tabs [data-content-selector] {
            border: 1px solid black;
            display: inline;
        }

        .tab-content {
            display: none;
        }

        .tab-active {
            background-color: red;
        }
    </style>
    <script>
        function showTab(targetTab) {

            if (!targetTab) return

            // initial const: "tabs" is parent node of target tab
            let tabsFind = targetTab
            while (!tabsFind.classList.contains("view-tabs")) tabsFind = tabsFind.parentNode
            const tabs = tabsFind

            // initial const: selector of current tab to show
            const targetContentSelector = targetTab.dataset.contentSelector

            // initial const: node of current tab to show
            const currentTabContent = targetContentSelector ? tabs.querySelector(targetContentSelector) : undefined

            // pre-condition (it must be hidden)
            if (currentTabContent && currentTabContent.style.display == "") { // if is hidden

                // before: previous selector
                const previousTabSelector = tabs.dataset.activeContentSelector

                // previous: hide previous content
                const previousTabContent = previousTabSelector ? tabs.querySelector(previousTabSelector) : undefined
                if (previousTabContent)
                    previousTabContent.style.display = "" // set hidden

                // previous: remove class .tab-active
                if (previousTabContent)
                    getTab(tabs, previousTabSelector).classList.remove("tab-active")

                // current: show current content
                if (currentTabContent)
                    currentTabContent.style.display = "initial" // set shown

                // current: add class .tab-active
                if (currentTabContent)
                    getTab(tabs, targetContentSelector).classList.add("tab-active")

                // after: track which one is active
                tabs.dataset.activeContentSelector = targetContentSelector // set active
            }
            else
                /* [reverse the activation, hiding the active] interacting with a tab that
             is already shown results in hiding its content (reversing its activation). */
                if (currentTabContent && currentTabContent.style.display != "") { // if is shown

                    // current: hide current content
                    if (currentTabContent)
                        currentTabContent.style.display = "" // set hidden

                    // current: remove class .tab-active
                    if (currentTabContent)
                        getTab(tabs, targetContentSelector).classList.remove("tab-active")

                    // after: track which one is active
                    tabs.dataset.activeContentSelector = "" // set active to nothing, nothing active
                }
        }
        function getTab(tabs, selector) {
            return tabs.querySelector('[data-content-selector="' + selector + '"]')
        }
        function initialTabs() {
            for (const tabs of document.querySelectorAll(".view-tabs[data-active-content-selector]")) {
                const contentSelector = tabs.dataset.activeContentSelector
                showTab(getTab(tabs, contentSelector))
            }
        }
        document.addEventListener('DOMContentLoaded', initialTabs)
    </script>
    <div class="view-tabs" data-active-content-selector="#content1" onclick="showTab(event.target)">
        <div data-content-selector="#content1">tab 1</div>
        <div data-content-selector="#content2">tab 2</div>
        <div data-content-selector="#content3">tab 3</div>
        <div data-content-selector="#wrong_selector_for_testing">tab 4</div>
        <br>
        <div id="content1" class="tab-content">content 1</div>
        <div id="content2" class="tab-content">content 2</div>
        <div id="content3" class="tab-content">content 3</div>
    </div>
    <hr>
    <div class="view-tabs" onclick="showTab(event.target)">
        <div data-content-selector="#content1">tab 1</div>
        <div data-content-selector="#content2">tab 2</div>
        <br>
        <div id="content1" class="tab-content">content 1
            <button data-content-selector="#content2">next</button>
        </div>
        <div id="content2" class="tab-content">content 2
            <button data-content-selector="#content1">previous</button>
        </div>
    </div>

    <script src="https://arkenidar.com/web/show-source.js" data-href="?show-source"></script>

</body>

</html>